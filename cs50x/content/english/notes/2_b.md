
Debugging
---------

*   Bugs are mistakes in programs that we didn’t intend to make. And debugging is the process of finding and fixing bugs.

help50 and printf
-----------------

*   Let’s say we wrote this program, `buggy0.c`:
    
        int main(void)
        {
            printf("hello, world\n");
        }
        
    
    *   We see an error (in red), when we try to `make` this program, that we are `implicitly declaring library function 'printf'`. We don’t really understand this, so we can run `help50 make buggy0`, which will tell us, at the end, that we might have forgotten to write `#include <stdio.h>`, which contains `printf`.
*   We can try this again with `buggy1.c`:
    
        #include <stdio.h>
        
        int main(void)
        {
            string name = get_string("What's your name?\n");
            printf("hello, %s\n", name);
        }
        
    
    *   We see a lot of errors, and even the first one doesn’t seem to make much sense. So we can again run `help50 make buggy1`, which will hint to us that we need `cs50.h` since `string` isn’t defined.
*   To clear the terminal window (so that we can see just the output of whatever we want to run next), we can press `control + L`, or type in `clear` as a command to the terminal window.
*   Let’s look at `buggy2.c`:
    
        #include <stdio.h>
        
        int main(void)
        {
            for (int i = 0; i <= 10; i++)
            {
                printf("#\n");
            }
        }
        
    
    *   Hmm, we intended to only see 10 `#`s, but there are 11. If we didn’t know what the problem is (since our program is compiling without any errors, and we now have a logical error), we could add another print line to help us:
        
            #include <stdio.h>
            
            int main(void)
            {
                for (int i = 0; i <= 10; i++)
                {
                    printf("i is now %i: ", i);
                    printf("#\n");
                }
            }
            
        
    *   Now, we see that `i` started at 0 and continued until it was 10, but we should have it stop once it’s at 10, with `i < 10` instead of `i <= 10`.

debug50
-------

*   Today we’ll also take a look at CS50 IDE, which is like the CS50 Sandbox, but with more features. It is an online development environment, with a code editor and a terminal window, but also tools for debugging and collaborating:  
    ![browser window with CS50 IDE, code editor on top with buggy2.c, terminal window on bottom](https://cs50.harvard.edu/x/2020/notes/2/cs50_ide.png)
*   In the CS50 IDE, we’ll have another tool, `debug50`, to help us debug programs.
*   We’ll open `buggy2.c` and try to `make buggy2`. But we saved `buggy2.c` into a folder called `src2`, so we need to run `cd src2` to change our directory to the right one. And CS50 IDE’s terminal will remind us what directory we’re in, with a prompt like `~/src/ $`. (The `~` indicates the default, or home directory.)
*   Instead of using `printf`, we can also debug our program interactively. We can add a _breakpoint_, or an indicator for a line of code where the debugger should pause our program. For example, we can click to the left of line 5 of our code, and a red circle will appear:  
    ![code editor with red icon next to line 5 of code](https://cs50.harvard.edu/x/2020/notes/2/breakpoint.png)
*   Now, if we run `debug50 ./buggy2`, we’ll see the debugger panel open on the right:  
    ![debugger panel with controls, variables](https://cs50.harvard.edu/x/2020/notes/2/debugger_panel.png)
*   We see that the variable we made, `i`, is under the `Local Variables` section, and see that there’s a value of `0`.
*   Our breakpoint has paused our program after line 5, to just before line 7, since it’s the first line of code that can run. To continue, we have a few controls in the debugger panel. The blue triangle will continue our program until we reach another breakpoint or the end of our program. The curved arrow to its right will “step over” the line, running it and pausing our program again immediately after.
*   So, we’ll use the curved arrow to run the next line, and see what changes after. We’re at the `printf` line, and pressing the curved arrow again, we see a single `#` printed to our terminal window. With another click of the arrow, we see the value of `i` on the right change to `1`. And we can keep clicking the arrow to watch our program run, one line at a time.
*   To exit the debugger, we can press `control + C` to stop the program.
*   We can save lots of time in the future by investing a little bit now to learn how to use `debug50`!
