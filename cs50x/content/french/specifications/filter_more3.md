#### Arêtes

Dans les algorithmes d'intelligence artificielle pour le traitement d'images, il est souvent utile de détecter les arêtes dans une image : les lignes de l'image qui créent une limite entre deux objets. Une façon d'obtenir cet effet est d'appliquer l'[opérateur de Sobel](https://en.wikipedia.org/wiki/Sobel_operator) à l'image.

Comme le flou d'image, la détection de contours fonctionne également en prenant chaque pixel, et en le modifiant en fonction de la grille de pixels 3x3 qui entoure ce pixel. Mais au lieu de simplement prendre la moyenne des neuf pixels, l'opérateur de Sobel calcule la nouvelle valeur de chaque pixel en prenant une somme pondérée des valeurs des pixels environnants. Et comme les arêtes entre les objets peuvent avoir lieu dans les directions verticale et horizontale, vous calculerez en fait deux sommes pondérées : une pour détecter les arêtes dans la direction x et une pour détecter les arêtes dans la direction y. En particulier, vous utiliserez les deux "noyaux" suivants :

! [Noyaux de Sobel](https://cs50.harvard.edu/x/2023/psets/4/filter/more/sobel.png)

Comment interpréter ces noyaux? En bref, pour chacune des trois valeurs de couleur pour chaque pixel, nous calculerons deux valeurs `Gx` et `Gy`. Pour calculer `Gx` pour la valeur de canal rouge d'un pixel, par exemple, nous prendrons les valeurs rouges d'origine des neuf pixels qui forment une boîte 3x3 autour du pixel, nous les multiplierons chacune par la valeur correspondante dans le noyau `Gx` et nous prendrons la somme des valeurs résultantes.

Pourquoi ces valeurs particulières pour le noyau? Dans la direction `Gx`, par exemple, nous multiplions les pixels à droite du pixel cible par un nombre positif et les pixels à gauche du pixel cible par un nombre négatif. Lorsque nous prenons la somme, si les pixels à droite sont d'une couleur similaire aux pixels à gauche, le résultat sera proche de 0 (les nombres s'annulent). Mais si les pixels à droite sont très différents des pixels à gauche, alors la valeur résultante sera très positive ou très négative, indiquant un changement de couleur qui est probablement le résultat d'une limite entre les objets. Et un argument similaire est vrai pour le calcul des arêtes dans la direction `y`.

En utilisant ces noyaux, nous pouvons générer une valeur `Gx` et `Gy` pour chacun des canaux rouge, vert et bleu d'un pixel. Mais chaque canal ne peut prendre qu'une seule valeur, pas deux : nous avons donc besoin d'un moyen de combiner `Gx` et `Gy` en une seule valeur. L'algorithme du filtre de Sobel combine `Gx` et `Gy` en une valeur finale en calculant la racine carrée de `Gx^2 + Gy^2`. Et puisque les valeurs de canal ne peuvent prendre que des valeurs entières de 0 à 255, assurez-vous que la valeur résultante est arrondie à l'entier le plus proche et limitée à 255 !

Et que dire de la gestion des pixels à la bordure ou dans le coin de l'image ? Il existe de nombreuses façons de gérer les pixels à la bordure, mais pour les besoins de ce problème, nous vous demandons de considérer l'image comme s'il y avait une bordure noire solide de 1 pixel autour de l'image: donc, essayer d'accéder à un pixel au-delà de la bordure de l'image doit être traité comme un pixel noir solide (valeurs de 0 pour chacun des canaux rouge, vert et bleu). Cela ignorera efficacement ces pixels de nos calculs de `Gx` et `Gy`.