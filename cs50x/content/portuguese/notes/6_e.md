Arquivos
-----

*   Vamos abrir um arquivo CSV:
    
        import csv
        from cs50 import get_string
        
        arquivo = open("agenda.csv", "a")
        
        nome = get_string("Nome: ")
        número = get_string("Número: ")
        
        escritor = csv.writer(arquivo)
        escritor.writerow((nome, número))
        
        arquivo.close()
        
    
    *   Acontece que o Python também possui um pacote (biblioteca) chamado `csv` que nos ajuda a trabalhar com arquivos CSV, então depois de abrirmos o arquivo para adicionar dados, podemos chamar `csv.writer` para criar um `escritor` a partir do arquivo e então `escritor.writerow` para escrever uma linha. Com os parênteses internos, estamos criando uma tupla com os valores que queremos escrever, então estamos passando um único argumento que contém todos os valores para nossa linha.
*   Podemos usar a palavra-chave `with`, que gentilmente fechará o arquivo para nós:
    
        ...
        with open("agenda.csv", "a") as arquivo:
            escritor = csv.writer(arquivo)
            escritor.writerow((nome, número))
        
    

Novas funcionalidades
------------

*   Uma funcionalidade do Python que o C não possui são as **expressões regulares**, ou padrões contra os quais podemos comparar strings. Por exemplo, sua sintaxe inclui:
    *   `.`, para qualquer caractere
    *   `.*`, para 0 ou mais caracteres
    *   `.+`, para 1 ou mais caracteres
    *   `?`, para algo opcional
    *   `^`, para o início da entrada
    *   `$`, para o final da entrada
*   Por exemplo, podemos comparar strings com:
    
        import re
        from cs50 import get_string
        
        s = get_string("Você concorda?\n")
        
        if re.search("^s(im)?$", s, re.IGNORECASE):
            print("Concordo.")
        elif re.search("^n(ão)?$", s, re.IGNORECASE):
            print("Não concordo.")
        
    
    *   Primeiro, precisamos do pacote `re`, ou biblioteca, para expressões regulares.
    *   Em seguida, para `s` ou `sim`, temos a expressão regular `^s(im)?$`. Queremos garantir que a string comece com `s`, e tenha opcionalmente `im` imediatamente após o `s`, e então termine.
    *   Da mesma forma, para `n` e `não`, queremos que nossa string comece, tenha a letra `n`, e opcionalmente a letra `ão` em seguida, e então termine. A expressão regular para isso seria `^n(ão)?$`.
    *   Passamos outro argumento, `re.IGNORECASE`, para ignorar o caso das letras na string.
    *   Se nenhuma expressão regular corresponder, não imprimiríamos nada.
*   No nosso próprio Mac ou PC, podemos abrir um terminal após instalar o Python e usar o microfone para converter nossa fala em texto:
    
        import speech_recognition
        
        reconhecedor = speech_recognition.Recognizer()
        with speech_recognition.Microfone() as fonte:
            print("Diga algo!")
            áudio = reconhecedor.listen(fonte)
        
        print("O Reconhecimento de Fala do Google pensa que você disse:")
        print(reconhecedor.recognize_google(áudio))
        
    
    *   Acontece que também há outra biblioteca que podemos baixar, chamada `speech_recognition`, que pode ouvir o áudio e convertê-lo em uma string.
*   Agora, podemos comparar na fala para imprimir algo diferente:
    
        ...
        palavras = reconhecedor.recognize_google(áudio)
        
        # Responder à fala
        if "olá" in palavras:
            print("Olá para você também!")
        elif "como você está" in palavras:
            print("Estou bem, obrigado!")
        elif "adeus" in palavras:
            print("Adeus para você também!")
        else:
            print("Hã?")
        
    
*   Podemos até usar expressões regulares para comparar parte de uma string:
    
        ...
        palavras = reconhecedor.recognize_google(áudio)
        
        correspondências = re.search("meu nome é (.*)", palavras)
        if correspondências:
            print(f"Olá, {correspondências[1]}.")
        else:
            print("Olá, você.")
        
    
    *   Aqui, podemos obter todos os caracteres após `meu nome é` com `.*` e imprimi-lo.
*   Executamos [detect.py e faces.py](https://cdn.cs50.net/2019/fall/lectures/6/src6/6/faces/), que encontra cada rosto (ou até um rosto específico) em uma foto.
*   [qr.py](https://cdn.cs50.net/2019/fall/lectures/6/src6/6/qr/) também irá gerar um código QR para uma URL específica.