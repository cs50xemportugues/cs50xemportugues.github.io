*   Em seguida, crie um arquivo na pasta `templates` chamado `index.html` digitando `code templates/index.html` e escreva o código da seguinte forma:

        {% extends "layout.html" %}

        {% block body %}
            <h1>Registrar</h1>
            <form action="/register" method="post">
                <input autocomplete="off" autofocus name="name" placeholder="Nome" type="text">
                <select name="sport">
                    <option disabled selected>Esporte</option>
                    {% for sport in sports %}
                        <option value="{{ sport }}">{{ sport }}</option>
                    {% endfor %}
                </select>
                <button type="submit">Registrar</button>
            </form>
        {% endblock %}
    

*   Em seguida, crie um arquivo chamado `layout.html` digitando `code templates/layout.html` e escreva o código da seguinte forma:

        <!DOCTYPE html>

        <html lang="en">
            <head>
                <meta name="viewport" content="initial-scale=1, width=device-width">
                <title>froshims</title>
            </head>
            <body>
                {% block body %}{% endblock %}
            </body>
        </html>
    

*   Em seguida, crie um arquivo na pasta templates chamado `success.html` da seguinte forma:

        {% extends "layout.html" %}

        {% block body %}
            Você está registrado!
        {% endblock %}
    

*   Por fim, crie um arquivo na pasta templates chamado `failure.html` da seguinte forma:

        {% extends "layout.html" %}

        {% block body %}
            Você não está registrado!
        {% endblock %}
    

*   Você pode imaginar como queremos aceitar o registro de muitos registrantes diferentes. Podemos melhorar `app.py` da seguinte forma:

        # Implementa um formulário de registro, armazenando os registrantes em um dicionário, com mensagens de erro

        from flask import Flask, redirect, render_template, request

        app = Flask(__name__)

        REGISTRANTES = {}

        ESPORTES = [
            "Basquetebol",
            "Futebol",
            "Ultimate Frisbee"
        ]


        @app.route("/")
        def index():
            return render_template("index.html", sports=ESPORTES)


        @app.route("/register", methods=["POST"])
        def register():

            # Validação de nome
            nome = request.form.get("name")
            if not nome:
                return render_template("error.html", message="Nome ausente")

            # Validação de esporte
            esporte = request.form.get("sport")
            if not esporte:
                return render_template("error.html", message="Esporte ausente")
            if esporte not in ESPORTES:
                return render_template("error.html", message="Esporte inválido")

            # Registrar participante
            REGISTRANTES[nome] = esporte

            # Confirmar registro
            return redirect("/registrants")


        @app.route("/registrants")
        def registrants():
            return render_template("registrants.html", registrants=REGISTRANTES)
    

    Observe que um dicionário chamado `REGISTRANTES` é usado para registrar o `esporte` selecionado por `REGISTRANTES[nome]`. Além disso, observe que `registrants=REGISTRANTES` passa o dicionário para este modelo.

*   Além disso, crie um novo modelo chamado `registrants.html` da seguinte forma:

        {% extends "layout.html" %}

        {% block body %}
            <h1>Participantes</h1>
            <table>
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Esporte</th>
                    </tr>
                </thead>
                <tbody>
                    {% for nome in registrants %}
                        <tr>
                            <td>{{ nome }}</td>
                            <td>{{ registrants[nome] }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% endblock %}
    

    Observe que `{% for nome in registrants %}...{% endfor %}` irá iterar por cada um dos registrantes. Muito poderoso poder iterar em uma página da web dinâmica!

*   Executando `flask run` e inserindo numerosos nomes e esportes, você pode navegar para `/registrants` para ver quais dados foram registrados.
*   Agora você possui um aplicativo da web! No entanto, existem algumas falhas de segurança! Como tudo é do lado do cliente, um adversário poderia alterar o HTML e "hackear" um site. Além disso, esses dados não persistirão se o servidor for desligado. Poderia haver alguma maneira de fazer com que nossos dados persistam mesmo quando o servidor for reiniciado?