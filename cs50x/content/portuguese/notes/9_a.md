Lição 9
=========

*   [Bem-vindo!](#bem-vindo)
*   [De Estático para Dinâmico](#de-estático-para-dinâmico)
*   [Flask](#flask)
*   [Layout](#layout)
*   [POST](#post)
*   [Frosh IMs](#frosh-ims)
*   [Flask e SQL](#flask-e-sql)
*   [Sessão](#sessão)
*   [Armazenar](#armazenar)
*   [API](#api)
*   [JSON](#json)
*   [Conclusão](#conclusão)

Bem-vindo!
--------

*   Nas semanas anteriores, você aprendeu diversas linguagens de programação, técnicas e estratégias.
*   Na verdade, esta aula tem sido muito menos uma _aula de C_ ou uma _aula de Python_ e muito mais uma _aula de programação_, permitindo que você acompanhe as tendências futuras.
*   Nestas últimas semanas, você aprendeu _como aprender_ sobre programação.
*   Hoje, vamos sair do HTML e CSS e combinar HTML, CSS, SQL, Python e JavaScript para que você possa criar suas próprias aplicações web.

De Estático para Dinâmico
-----------------

*   Até agora, todo HTML que você viu foi pré-escrito e estático.
*   No passado, quando você visitava uma página, o navegador baixava uma página HTML e você conseguia visualizá-la.
*   Páginas dinâmicas se referem à habilidade do Python e de linguagens similares de criar arquivos HTML dinamicamente. Dessa forma, você pode ter páginas web geradas por opções selecionadas pelo usuário.
*   Você utilizou o `http-server` no passado para servir suas páginas web. Hoje, iremos utilizar um novo servidor que pode analisar um endereço web e executar ações baseadas na URL fornecida.

Flask
-----

*   _Flask_ é uma biblioteca de terceiros que permite que você hospede aplicações web utilizando o framework Flask em Python.
*   Você pode executar o Flask através do comando `flask run`.
*   Para fazer isso, você precisará de um arquivo chamado `app.py` e uma pasta chamada `templates`.
*   Para começar, crie uma pasta chamada `templates` e crie um arquivo chamado `index.html` com o seguinte código:
    
        <!DOCTYPE html>
        
        <html lang="en">
            <head>
                <meta name="viewport" content="initial-scale=1, width=device-width">
                <title>hello</title>
            </head>
            <body>
                hello, {{ name }}
            </body>
        </html>
        
    
    Observe o duplo `{{ name }}`, que é um espaço reservado para algo que será fornecido posteriormente pelo nosso servidor Flask.
    
*   Em seguida, na mesma pasta onde a pasta `templates` aparece, crie um arquivo chamado `app.py` e adicione o seguinte código:
    
        # Cumprimenta o usuário
        
        from flask import Flask, render_template, request
        
        app = Flask(__name__)
        
        
        @app.route("/")
        def index():
            return render_template("index.html", name=request.args.get("name", "world"))
        
    
    Observe que este código define `app` como a aplicação Flask. Em seguida, ele define a rota `/` de `app` para retornar o conteúdo de `index.html` com o argumento `name`. Por padrão, a função `request.args.get` irá procurar pelo parâmetro `name` fornecido pelo usuário. Se nenhum nome for fornecido, ele utilizará o valor padrão `world`.
    
*   Por fim, adicione um arquivo final na mesma pasta de `app.py` chamado `requirements.txt` que possui apenas uma linha de código:
    
        Flask
        
    
    Observe que apenas `Flask` aparece neste arquivo.
    
*   Você pode executar este arquivo digitando `flask run` na janela do terminal. Se o Flask não executar, certifique-se de que a sintaxe está correta em cada um dos arquivos acima. Além disso, se o Flask ainda não executar, verifique se seus arquivos estão organizados da seguinte maneira:
    
        /templates
            index.html
        app.py
        requirements.txt
        
    
    Assim que você conseguir executá-lo, será solicitado que clique em um link. Ao navegar para essa página da web, tente adicionar `?name=[Seu Nome]` à URL base na barra de endereço do seu navegador.

*   Melhorando o nosso programa, sabemos que a maioria dos usuários não irá digitar argumentos na barra de endereço. Em vez disso, os programadores dependem dos usuários preencherem formulários em páginas web. Portanto, podemos modificar o index.html da seguinte forma:
    
        <!DOCTYPE html>
        
        <html lang="en">
            <head>
                <meta name="viewport" content="initial-scale=1, width=device-width">
                <title>hello</title>
            </head>
            <body>
                <form action="/greet" method="get">
                    <input autocomplete="off" autofocus name="name" placeholder="Name" type="text">
                    <button type="submit">Greet</button>
                </form>
            </body>
        </html>
        
    
    Observe que agora um formulário é criado que recebe o nome do usuário e o envia para uma rota chamada `/greet`.