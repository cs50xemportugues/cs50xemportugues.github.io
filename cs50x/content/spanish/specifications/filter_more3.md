#### Bordes

En algoritmos de inteligencia artificial para procesamiento de imágenes, a menudo es útil detectar bordes en una imagen: líneas en la imagen que crean un límite entre un objeto y otro. Una forma de lograr este efecto es mediante la aplicación del [operador Sobel](https://en.wikipedia.org/wiki/Sobel_operator) a la imagen.

Al igual que con el desenfoque de imágenes, la detección de bordes también funciona tomando cada píxel y modificándolo según la matriz de 3x3 píxeles que rodea ese píxel. Pero en lugar de tomar solo el promedio de los nueve píxeles, el operador Sobel calcula el nuevo valor de cada píxel tomando una suma ponderada de los valores para los píxeles circundantes. Y ya que los bordes entre objetos podrían ocurrir tanto en una dirección vertical como horizontal, realmente se calcularán dos sumas ponderadas: una para detectar bordes en la dirección x, y otra para detectar bordes en la dirección y. En particular, se utilizarán los siguientes dos "núcleos":

![Núcleos Sobel](https://cs50.harvard.edu/x/2023/psets/4/filter/more/sobel.png)

¿Cómo interpretar estos núcleos? En resumen, por cada uno de los tres valores de color para cada píxel, calcularemos dos valores `Gx` e `Gy`. Para calcular `Gx` del valor del canal rojo de un píxel, por ejemplo, tomaremos los valores rojos originales de los nueve píxeles que forman una caja de 3x3 alrededor del píxel, los multiplicaremos cada uno por el valor correspondiente del núcleo `Gx`, y tomaremos la suma de los valores resultantes.

¿Por qué estos valores particulares para el núcleo? En la dirección `Gx`, por ejemplo, estamos multiplicando los píxeles a la derecha del píxel objetivo por un número positivo, y multiplicando los píxeles a la izquierda del píxel objetivo por un número negativo. Cuando tomamos la suma, si los píxeles a la derecha tienen un color similar a los píxeles a la izquierda, el resultado estará cerca de 0 (los números se cancelan). Pero si los píxeles a la derecha son muy diferentes de los píxeles a la izquierda, entonces el valor resultante será muy positivo o muy negativo, indicando un cambio de color que probablemente sea el resultado de un límite entre objetos. Y un argumento similar es válidos para calcular bordes en la dirección `y`.

Usando estos núcleos, podemos generar un valor `Gx` e `Gy` para cada uno de los canales rojo, verde y azul de un píxel. Pero cada canal solo puede tener un valor, no dos: así que necesitamos una forma de combinar `Gx` y `Gy` en un solo valor. El algoritmo del filtro Sobel combina `Gx` e `Gy` en un valor final calculando la raíz cuadrada de `Gx^2 + Gy^2`. Y ya que los valores de los canales solo pueden tomar valores enteros de 0 a 255, asegúrate de que el valor resultante sea redondeado al número entero más cercano y limitado a 255.

¿Y qué pasa con el manejo de píxeles en el borde o en la esquina de la imagen? Hay muchas formas de manejar los píxeles en el borde, pero para los propósitos de este problema, te pediremos que trates la imagen como si hubiera un borde negro sólido de 1 píxel alrededor del borde de la imagen: por lo tanto, intentar acceder a un píxel más allá del borde de la imagen debe ser tratado como un píxel negro sólido (valores de 0 para cada uno de rojo, verde y azul). Esto efectivamente ignorará esos píxeles de nuestros cálculos de `Gx` y `Gy`.