<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>CS50x em Portugu√™s</title>

    <!-- http://getbootstrap.com/docs/4.5/getting-started/introduction/ -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/popper.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>

    <!-- https://momentjs.com/, https://momentjs.com/timezone/ -->
    <script src="/static/js/moment.min.js"></script>
    <script src="/static/js/moment-timezone-with-data.min.js"></script>
    <script src="/static/js/luxon.min.js"></script>

    <!-- https://www.algolia.com/doc/guides/building-search-ui/installation/js/ -->
    <script src="/static/js/algoliasearchLite.min.js"></script>
    <script src="/static/js/instantsearch.production.min.js"></script>
    <script src="/static/js/jekyll-theme-cs50.js"></script>

    <script id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/static/highlight/highlight.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.8.0/dist/mermaid.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/highlight/styles/vs.min.css"/>
    <link rel="stylesheet" href="/static/css/page.css">

    <style>
      code {
        color: black;
        border: 1px solid #dee2e6;
      }

      pre > code {
        padding: 0 !important;
      }

      pre {
        border: 1px solid #dee2e6;
      }

      .mermaid {
        background-color: white !important;
        border: none !important;
      }
    </style>
  </head>

  <body>
    <!-- Markdown Flux Diagrams -->
    <script type="module">
      mermaid.initialize({startOnLoad: true});
    </script>
    <div class="container-fluid">
      <div class="row">
        <aside class="col-md" style="background-color: darkgreen">
  <header>
    <h1>
      <a href="">CS50x em Portugu√™s</a>
    </h1>

    <p>
      <a target="_blank" href=""></a>
      <br/>
      2024
    </p>
  </header>

  <button class="btn btn-sm collapsed d-md-none" aria-controls="nav" aria-expanded="false" data-target="aside &gt; nav" data-toggle="collapse">
    Menu
  </button>

  <nav class="collapse d-md-block" id="nav">
    <hr/>

    <ul>
      <li>
        <a href="/2024/semanas/0.html">Semana
          0</a>
        Scratch üò∫
      </li>
      <li>
        <a href="/2024/semanas/1.html">Semana
          1</a>
        C
      </li>
      <li>
        <a href="/2024/semanas/2.html">Semana
          2</a>
        Arrays
      </li>
      <li>
        <a href="/2024/semanas/3.html">Semana
          3</a>
        Algoritmos
      </li>
      <li>
        <a href="/2024/semanas/4.html">Semana
          4</a>
        Mem√≥ria
      </li>
      <li>
        <a href="/2024/semanas/5.html">Semana
          5</a>
        Estruturas de Dados
      </li>
      <li>
        <a href="/2024/semanas/6.html">Semana
          6</a>
        Python
      </li>
      <li>
        <a href="/2024/semanas/7.html">Semana
          7</a>
        SQL
      </li>
      <li>
        <a href="/2024/semanas/8.html">Semana
          8</a>
        HTML, CSS, JavaScript
      </li>
      <li>
        <a href="/2024/semanas/9.html">Semana
          9</a>
        Flask
      </li>
      <li>
        <a href="/2024/semanas/10.html">Semana
          10</a>
        Seguran√ßa Cibern√©tica
      </li>
    </ul>

    <hr/>

    <ul>
      <li>
        <a href="/2024/projeto.html">Projeto Final</a>
      </li>
    </ul>

    <hr/>

    <ul>
      <li>
        <a href="/2024/honestidade.html">Honestidade Acad√™mica</a>
      </li>
      <li>
        <a href="/2024/certificado.html">Certificado CS50</a>
      </li>
      <li>
        <a href="/2024/perguntas-frequentes.html">Perguntas Frequentes</a>
      </li>
      <li>
        <a href="https://cs50.me/cs50x">Livro de Notas</a>
      </li>
      <li>
        <a href="/2024/equipe.html">Equipe</a>
      </li>
      <li>
        <a href="/2024/plano-de-curso.html">Plano de Curso</a>
      </li>
    </ul>
    <hr/>

    <ul>
      <li>
        <a href="/manual/index.html">P√°ginas do Manual</a>
      </li>
      <li>
        <a href="/2024/estilo.html">Guia de Estilo</a>
      </li>
    </ul>
  </nav>
</aside>
        <main class="col-md markdown-body">
          

  <div class="alert alert-warning" data-alert="warning" role="alert"><p>Se voc√™ usou <code class="language-plaintext highlighter-rouge">wget</code> para baixar <code class="language-plaintext highlighter-rouge">finance.zip</code> antes das <a data-local="2024-04-10T08:30:00-04:00" href="https://time.cs50.io/20240410T083000-0400">2024-04-10T08:30:00-04:00</a>, certifique-se de copiar, colar e executar este comando <em>dentro do seu diret√≥rio <code>finance</code></em> para baixar uma vers√£o mais recente de <code class="language-plaintext highlighter-rouge">helpers.py</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[ -f helpers.py ] &amp;&amp; curl -O https://cdn.cs50.net/2024/x/psets/9/finance/helpers.py
</code></pre></div></div></div>

<h1>C$50 Finan√ßas</h1>
<p>Implemente um site no qual usu√°rios podem "comprar" e "vender" a√ß√µes, como abaixo.</p>
<p><img alt="C$50 Finan√ßas" src="https://cs50.harvard.edu/x/2024/psets/9/finance/finance_2024.png" /></p>
<h2>Hist√≥rico</h2>
<p>Se voc√™ n√£o tem certeza sobre o que significa comprar e vender a√ß√µes (por ex., as porcentagens de uma empresa), v√° <a href="https://www.investopedia.com/articles/basics/06/invest1000.asp">aqui</a> para um tutorial.</p>
<p>Voc√™ est√° prestes a implementar o C$50 Finan√ßas, um aplicativo web no qual voc√™ pode gerenciar portf√≥lios de a√ß√µes. Essa ferramenta n√£o s√≥ permitir√° que voc√™ confira os pre√ßos reais das a√ß√µes e os valores dos portf√≥lios, como tamb√©m permitir√° que voc√™ compre (ok, "compre") e venda (ok, "venda") a√ß√µes consultando os pre√ßos das a√ß√µes.</p>
<p>De fato, existem ferramentas (uma √© conhecida como IEX) que permitem que voc√™ baixe cota√ß√µes de a√ß√µes pela API (interface de programa√ß√£o de aplicativos) usando URLs como <code>https://api.iex.cloud/v1/data/core/quote/nflx?token=API_KEY</code>. Observe como o s√≠mbolo da Netflix (NFLX) est√° embutido neste URL; √© assim que o IEX sabe de quem deve retornar os dados. Esse link n√£o retornar√° nenhum dado porque o IEX exige que voc√™ use uma chave de API, mas se retornasse, voc√™ veria uma resposta no formato JSON (JavaScript Object Notation) como este:</p>
<pre><code>  {
    "avgTotalVolume":6787785,
    "calculationPrice":"tops",
    "change":1.46,
    "changePercent":0.00336,
    "close":null,
    "closeSource":"official",
    "closeTime":null,
    "companyName":"Netflix Inc.",
    "currency":"USD",
    "delayedPrice":null,
    "delayedPriceTime":null,
    "extendedChange":null,
    "extendedChangePercent":null,
    "extendedPrice":null,
    "extendedPriceTime":null,
    "high":null,
    "highSource":"IEX real time price",
    "highTime":1699626600947,
    "iexAskPrice":460.87,
    "iexAskSize":123,
    "iexBidPrice":435,
    "iexBidSize":100,
    "iexClose":436.61,
    "iexCloseTime":1699626704609,
    "iexLastUpdated":1699626704609,
    "iexMarketPercent":0.00864679844447232,
    "iexOpen":437.37,
    "iexOpenTime":1699626600859,
    "iexRealtimePrice":436.61,
    "iexRealtimeSize":5,
    "iexVolume":965,
    "lastTradeTime":1699626704609,
    "latestPrice":436.61,
    "latestSource":"IEX real time price",
    "latestTime":"9:31:44 AM",
    "latestUpdate":1699626704609,
    "latestVolume":null,
    "low":null,
    "lowSource":"IEX real time price",
    "lowTime":1699626634509,
    "marketCap":192892118443,
    "oddLotDelayedPrice":null,
    "oddLotDelayedPriceTime":null,
    "open":null,
    "openTime":null,
    "openSource":"official",
    "peRatio":43.57,
    "previousClose":435.15,
    "previousVolume":2735507,
    "primaryExchange":"NASDAQ",
    "symbol":"NFLX",
    "volume":null,
    "week52High":485,
    "week52Low":271.56,
    "ytdChange":0.4790450244167119,
    "isUSMarketOpen":true
  }
</code></pre>
<p>Observe como, entre as chaves, h√° uma lista separada por v√≠rgulas de pares chave-valor, com dois pontos separando cada chave do seu valor. Faremos algo muito parecido, com o Yahoo Finance.</p>
<p>Vamos nos concentrar agora em obter o c√≥digo de distribui√ß√£o deste problema!</p>
<h2>Come√ßando</h2>
<p>Fa√ßa login em <a href="https://cs50.dev/">cs50.dev</a>, clique na sua janela de terminal e execute <code>cd</code> por si s√≥. Voc√™ deve descobrir que o prompt da janela de terminal se parece com o abaixo:</p>
<pre><code>  $
</code></pre>
<p>Em seguida, execute</p>
<pre><code>  wget https://cdn.cs50.net/2024/x/psets/9/finance.zip
</code></pre>
<p>para baixar um ZIP chamado <code>finance.zip</code> no seu espa√ßo de c√≥digo.</p>
<p>Ent√£o execute</p>
<pre><code>  unzip finance.zip
</code></pre>
<p>para criar uma pasta chamada <code>finance</code>. Voc√™ n√£o precisar√° mais do arquivo ZIP, ent√£o voc√™ pode executar</p>
<pre><code>  rm finance.zip
</code></pre>
<p>e responder com "y" seguido de Enter no prompt para remover o arquivo ZIP que voc√™ baixou.</p>
<p>Agora digite</p>
<pre><code>  cd finance
</code></pre>
<p>seguido de Enter para ir para (por ex., abrir) esse diret√≥rio. Seu prompt agora deve se parecer com o abaixo.</p>
<pre><code>  finance/ $
</code></pre>
<p>Execute <code>ls</code> por si s√≥ e voc√™ ver√° alguns arquivos e pastas:</p>
<pre><code>  app.py  finance.db  helpers.py  requirements.txt  static/  templates/
</code></pre>
<p>Se voc√™ tiver algum problema, siga estes mesmos passos novamente e veja se consegue determinar onde errou!</p>
<h3>Execu√ß√£o</h3>
<p>Inicie o servidor web integrado ao Flask (dentro de <code>finance/</code>):</p>
<pre><code>  $ flask run
</code></pre>
<p>Visite a URL exibida por <code>flask</code> para ver o c√≥digo de distribui√ß√£o em a√ß√£o. Voc√™ n√£o conseguir√° fazer login ou se registrar por enquanto!</p>
<p>Dentro de <code>finance/</code>, execute <code>sqlite3 finance.db</code> para abrir <code>finance.db</code> com o <code>sqlite3</code>. Se voc√™ executar <code>.schema</code> no prompt do SQLite, observe como <code>finance.db</code> vem com uma tabela chamada <code>users</code> (usu√°rios). D√™ uma olhada em sua estrutura (por ex., esquema). Observe como, por padr√£o, os novos usu√°rios receber√£o US$ 10.000 em dinheiro. Mas se voc√™ executar <code>SELECT * FROM users;</code>, n√£o haver√° (ainda!) usu√°rios (por ex., linhas) l√° para navegar.</p>
<p>Outra forma de visualizar <code>finance.db</code> √© com um programa chamado phpLiteAdmin. Clique em <code>finance.db</code> no navegador de arquivos do seu espa√ßo de c√≥digo e, em seguida, clique no link mostrado abaixo do texto "Please visit the following link to authorize GitHub Preview". Voc√™ dever√° ver informa√ß√µes sobre o pr√≥prio banco de dados, bem como uma tabela, <code>users</code>, assim como viu no prompt <code>sqlite3</code> com <code>.schema</code>.</p>
<h3>Entendimento</h3>
<h4><code>app.py</code></h4>
<p>Abra <code>app.py</code>. No in√≠cio do arquivo h√° v√°rias importa√ß√µes, entre elas o m√≥dulo SQL da CS50 e algumas fun√ß√µes auxiliares. Mais sobre elas em breve.</p>
<p>Depois de configurar o <a href="https://flask.pocoo.org/">Flask</a>, observe como esse arquivo desabilita o cache das respostas (desde que voc√™ esteja no modo de depura√ß√£o, o que √© ativado por padr√£o no seu c√≥digo no Code50), para que voc√™ n√£o fa√ßa uma altera√ß√£o em algum arquivo e o seu navegador n√£o perceba. Observe em seguida como ele configura o <a href="https://jinja.palletsprojects.com/en/3.1.x/">Jinja</a> com um "filtro" personalizado, <code>usd</code>, uma fun√ß√£o (definida em <code>helpers.py</code>) que facilitar√° a formata√ß√£o dos valores como d√≥lares americanos (USD). Ele configura ainda o Flask para armazenar <a href="https://flask.palletsprojects.com/en/1.1.x/quickstart/#sessions">sess√µes</a> no sistema de arquivos local (ou seja, disco) em vez de armazen√°-las dentro de cookies (assinalados digitalmente), que √© o padr√£o do Flask. O arquivo ent√£o configura o m√≥dulo SQL da CS50 para usar o <code>finance.db</code>.</p>
<p>Depois disso, h√° v√°rias rotas, das quais somente duas est√£o totalmente implementadas: <code>login</code> e <code>logout</code>. Leia a implementa√ß√£o de <code>login</code> primeiro. Observe como ele usa <code>db.execute</code> (da biblioteca da CS50) para consultar <code>finance.db</code>. E observe como ele usa <code>check_password_hash</code> para comparar hashes das senhas dos usu√°rios. Observe tamb√©m como <code>login</code> "lembra" que um usu√°rio est√° conectado armazenando seu <code>user_id</code>, um INTEIRO, em <code>session</code>. Dessa forma, qualquer uma das rotas desse arquivo pode verificar qual usu√°rio, se houver, est√° conectado. Finalmente, observe como, depois que o usu√°rio tiver conectado com sucesso, <code>login</code> redirecionar√° para <code>"/", levando o usu√°rio para sua p√°gina inicial. Enquanto isso, observe como</code>logout<code>simplesmente limpa</code>session`, efetivamente desconectando o usu√°rio.</p>
<p>Observe como a maioria das rotas s√£o "decoradas" com <code>@login_required</code> (uma fun√ß√£o tamb√©m definida em <code>helpers.py</code>). Esse decorador garante que, se um usu√°rio tentar visitar qualquer uma dessas rotas, ele ser√° primeiro redirecionado para <code>login</code> para se conectar.</p>
<p>Observe tamb√©m como a maioria das rotas suporta GET e POST. No entanto, a maioria delas (por enquanto!) simplesmente retorna um "pedido de desculpas", j√° que ainda n√£o foram implementadas.</p>
<h4><code>helpers.py</code></h4>
<p>Em seguida, d√™ uma olhada em <code>helpers.py</code>. Ah, a√≠ est√° a implementa√ß√£o de <code>apology</code>. Observe como ela acaba renderizando um template, <code>apology.html</code>. Por acaso ela tamb√©m define internamente outra fun√ß√£o, <code>escape</code>, que ela simplesmente usa para substituir caracteres especiais em pedidos de desculpas. Ao definir <code>escape</code> dentro de <code>apology</code>, n√≥s escopaamos a primeira apenas para a segunda; nenhuma outra fun√ß√£o conseguir√° (ou precisar√°) cham√°-la.</p>
<p>O pr√≥ximo no arquivo √© <code>login_required</code>. N√£o se preocupe se ela for um pouco cr√≠ptica, mas se voc√™ j√° se perguntou como uma fun√ß√£o pode retornar outra fun√ß√£o, aqui est√° um exemplo!</p>
<p>Depois dela vem <code>lookup</code>, uma fun√ß√£o que, dado um <code>s√≠mbolo</code> (ex.: NFLX), retorna uma cota√ß√£o de a√ß√µes para uma empresa na forma de um <code>dict</code> com duas chaves: <code>price</code>, cujo valor √© um <code>float</code>; e <code>symbol</code>, cujo valor √© uma <code>str</code>, uma vers√£o padronizada (em caixa alta) do s√≠mbolo de uma a√ß√£o, independentemente de como aquele s√≠mbolo foi escrito em caixa alta ou baixa quando passado para <code>lookup</code>.</p>
<div class="alert alert-warning" data-alert="warning" role="alert"><p>Observa√ß√£o.  Se voc√™ come√ßou esse problema em 2023, observe que <code class="language-plaintext highlighter-rouge">lookup</code> n√£o retorna mais uma chave de <code class="language-plaintext highlighter-rouge">name</code>, portanto, remova-a de qualquer consulta que a espere. Nenhum nome precisa ser exibido em nenhuma p√°gina.</p></div>

<p>O √∫ltimo no arquivo √© <code>usd</code>, uma fun√ß√£o curta que simplesmente formata um <code>float</code> como USD (ex.: <code>1234.56</code> √© formatado como <code>$1,234.56</code>).</p>
<h4><code>requirements.txt</code></h4>
<p>Agora d√™ uma olhada r√°pida em <code>requirements.txt</code>. Esse arquivo simplesmente prescreve os pacotes dos quais esse aplicativo depender√°.</p>
<h4><code>static/</code></h4>
<p>D√™ uma olhada tamb√©m em <code>static/</code>, dentro do qual est√° <code>styles.css</code>. √â l√° que fica parte do CSS inicial. Fique √† vontade para alter√°-lo como quiser.</p>
<h4><code>templates/</code></h4>
<p>Agora olhe em <code>templates/</code>. Em <code>login.html</code> h√°, essencialmente, um formul√°rio HTML, estilizado com <a href="https://getbootstrap.com/">Bootstrap</a>. Enquanto isso, em <code>apology.html</code>, h√° um template para um pedido de desculpas. Lembre-se de que <code>apology</code> em <code>helpers.py</code> recebeu dois argumentos: <code>message</code>, que foi passado para <code>render_template</code> como o valor de <code>bottom</code>, e, opcionalmente, <code>code</code>, que foi passado para <code>render_template</code> como o valor de <code>top</code>. Observe em <code>apology.html</code> como esses valores s√£o usados no final! E <a href="https://github.com/jacebrowning/memegen">aqui est√° o motivo</a> 0:-)</p>
<p>Por √∫ltimo, vem <code>layout.html</code>. Ele √© um pouco maior do que o normal, mas isso ocorre principalmente porque ele vem com uma "navbar" (barra de navega√ß√£o) sofisticada e otimizada para dispositivos m√≥veis, tamb√©m baseada no Bootstrap. Observe como ele define um bloco, <code>main</code>, dentro do qual os templates (incluindo <code>apology.html</code> e <code>login.html</code>) devem ir. Ele tamb√©m inclui suporte para o <a href="https://flask.palletsprojects.com/en/1.1.x/quickstart/#message-flashing">message flashing</a> do Flask, para que voc√™ possa transmitir mensagens de uma rota para outra para que o usu√°rio as veja.</p>
<h2>Especifica√ß√£o</h2>
<h3><code>register</code></h3>
<p>Conclua a implementa√ß√£o de <code>register</code> de forma que permita que um usu√°rio se cadastre para uma conta por meio de um formul√°rio.</p>
<ul>
<li>Exija que o usu√°rio insira um nome de usu√°rio, implementado como um campo de texto cujo <code>name</code> √© <code>username</code>. Renderize um pedido de desculpas se a entrada do usu√°rio estiver em branco ou se o nome de usu√°rio j√° existir.<ul>
<li>Observe que <a href="https://cs50.readthedocs.io/libraries/cs50/python/#cs50.SQL"><code>cs50.SQL.execute</code></a> lan√ßar√° uma exce√ß√£o <code>ValueError</code> se voc√™ tentar <code>INSERT</code> um nome de usu√°rio duplicado porque criamos um <code>UNIQUE INDEX</code> em <code>users.username</code>. Portanto, certifique-se de usar <code>try</code> e <code>except</code> para determinar se o nome de usu√°rio j√° existe.</li>
</ul>
</li>
<li>Exija que o usu√°rio insira uma senha, implementada como um campo de texto cujo <code>name</code> √© <code>password</code>, e em seguida a mesma senha novamente, implementada como um campo de texto cujo <code>name</code> √© <code>confirmation</code>. Renderize um pedido de desculpas se uma das entradas estiver em branco ou se as senhas n√£o corresponderem.</li>
<li>Envie a entrada do usu√°rio via <code>POST</code> para <code>/register</code>.</li>
<li><code>INSERT</code> o novo usu√°rio em <code>users</code>, armazenando um hash da senha do usu√°rio, n√£o a senha em si. Criptografe a senha do usu√°rio com <a href="https://werkzeug.palletsprojects.com/en/2.3.x/utils/#werkzeug.security.generate_password_hash"><code>generate_password_hash</code></a> Provavelmente voc√™ vai querer criar um novo template (ex.: <code>register.html</code>) que seja bem semelhante a <code>login.html</code>.</li>
</ul>
<p>Depois de implementar <code>register</code> corretamente, voc√™ deve conseguir se cadastrar para obter uma conta e conectar-se (j√° que <code>login</code> e <code>logout</code> j√° funcionam)! E voc√™ deve conseguir ver suas linhas pelo phpLiteAdmin ou <code>sqlite3</code>.</p>
<h3><code>quote</code></h3>
<p>Conclua a implementa√ß√£o de <code>quote</code> de forma que permita que um usu√°rio procure o pre√ßo atual de uma a√ß√£o.</p>
<ul>
<li>Exija que o usu√°rio insira o s√≠mbolo de uma a√ß√£o, implementado como um campo de texto cujo <code>name</code> √© <code>symbol</code>.</li>
<li>Envie a entrada do usu√°rio via <code>POST</code> para <code>/quote</code>.</li>
<li>Provavelmente voc√™ vai querer criar dois novos templates (ex.: <code>quote.html</code> e <code>quoted.html</code>). Quando um usu√°rio visita <code>/quote</code> via GET, renderize um desses templates, dentro do qual deve haver um formul√°rio HTML que envia para <code>/quote</code> via POST. Em resposta a um POST, <code>quote</code> pode renderizar esse segundo template, incorporando a ele um ou mais valores de <code>lookup</code>.</li>
</ul>
<h3><code>buy</code></h3>
<p>Complete a implementa√ß√£o de <code>buy</code> de forma que permita que o usu√°rio compre a√ß√µes.</p>
<ul>
<li>Exija que o usu√°rio informe um s√≠mbolo de a√ß√£o, implementado como um campo de texto cujo <code>name</code> seja <code>symbol</code>. Renderize um pedido de desculpas se a entrada estiver em branco ou o s√≠mbolo n√£o existir (de acordo com o valor de retorno de <code>lookup</code>).</li>
<li>Exija que o usu√°rio insira um n√∫mero de a√ß√µes, implementado como um campo de texto cujo <code>name</code> seja <code>shares</code>. Renderize um pedido de desculpas se a entrada n√£o for um n√∫mero inteiro positivo.</li>
<li>Envie a entrada do usu√°rio via <code>POST</code> para <code>/buy</code>.</li>
<li>Ap√≥s a conclus√£o, redirecione o usu√°rio para a p√°gina inicial.</li>
<li>Provavelmente, voc√™ desejar√° chamar <code>lookup</code> para consultar o pre√ßo atual de uma a√ß√£o.</li>
<li>Provavelmente, voc√™ desejar√° <code>SELECIONAR</code> quanto dinheiro o usu√°rio tem atualmente em <code>users</code>.</li>
<li>Adicione uma ou mais tabelas novas ao <code>finance.db</code> para manter o controle da compra. Armazene informa√ß√µes suficientes para saber quem comprou o qu√™, a que pre√ßo e quando.<ul>
<li>Use tipos SQLite apropriados.</li>
<li>Defina √≠ndices <code>UNIQUE</code> em quaisquer campos que devem ser exclusivos.</li>
<li>Defina √≠ndices (n√£o <code>UNIQUE</code>) em quaisquer campos pelos quais voc√™ pesquisar√° (como por meio de <code>SELECT</code> com <code>WHERE</code>).</li>
</ul>
</li>
<li>Renderize um pedido de desculpas, sem concluir a compra, se o usu√°rio n√£o puder comprar o n√∫mero de a√ß√µes ao pre√ßo atual.</li>
<li>Voc√™ n√£o precisa se preocupar com condi√ß√µes de corrida (ou usar transa√ß√µes).</li>
</ul>
<p>Depois de implementar <code>buy</code> corretamente, voc√™ poder√° ver as compras dos usu√°rios em suas novas tabelas no phpLiteAdmin ou <code>sqlite3</code>.</p>
<h3><code>index</code></h3>
<p>Complete a implementa√ß√£o de <code>index</code> de forma que exiba uma tabela HTML resumindo, para o usu√°rio atualmente conectado, quais a√ß√µes o usu√°rio possui, o n√∫mero de a√ß√µes possu√≠das, o pre√ßo atual de cada a√ß√£o e o valor total de cada participa√ß√£o (ou seja, a√ß√µes vezes pre√ßo). Exiba tamb√©m o saldo atual de caixa do usu√°rio e o total geral (ou seja, valor total das a√ß√µes mais o dinheiro).</p>
<ul>
<li>Provavelmente, voc√™ desejar√° executar v√°rios <code>SELECT</code>s. Dependendo de como voc√™ implementar sua(s) tabela(s), voc√™ poder√° encontrar <a href="https://www.google.com/search?q=SQLite+GROUP+BY,">GROUP BY</a> <a href="https://www.google.com/search?q=SQLite+HAVING,">HAVING</a> <a href="https://www.google.com/search?q=SQLite+SUM,">SUM</a> e/ou <a href="https://www.google.com/search?q=SQLite+WHERE">WHERE</a> de seu interesse.</li>
<li>Provavelmente, voc√™ desejar√° chamar <code>lookup</code> para cada a√ß√£o.</li>
</ul>
<h3><code>sell</code></h3>
<p>Complete a implementa√ß√£o de <code>sell</code> para que permita que o usu√°rio venda a√ß√µes de uma a√ß√£o (que ele possui).</p>
<ul>
<li>Requeira que o usu√°rio insira um s√≠mbolo de a√ß√£o, implementado como um menu <code>select</code> cujo <code>name</code> seja <code>symbol</code>. Renderize um pedido de desculpas se o usu√°rio n√£o selecionar uma a√ß√£o ou se (de alguma forma, depois de enviar) o usu√°rio n√£o possuir nenhuma a√ß√£o daquela a√ß√£o.</li>
<li>Exija que o usu√°rio insira um n√∫mero de a√ß√µes, implementado como um campo de texto cujo <code>name</code> seja <code>shares</code>. Renderize um pedido de desculpas se a entrada n√£o for um n√∫mero inteiro positivo ou se o usu√°rio n√£o possuir tantas a√ß√µes da a√ß√£o.</li>
<li>Envie a entrada do usu√°rio via <code>POST</code> para <code>/sell</code>.</li>
<li>Ap√≥s a conclus√£o, redirecione o usu√°rio para a p√°gina inicial.</li>
<li>Voc√™ n√£o precisa se preocupar com condi√ß√µes de corrida (ou usar transa√ß√µes).</li>
</ul>
<h3><code>history</code></h3>
<p>Complete a implementa√ß√£o de <code>history</code> de forma que exiba uma tabela HTML resumindo todas as transa√ß√µes de um usu√°rio, listando linha por linha cada compra e venda.</p>
<ul>
<li>Para cada linha, deixe claro se uma a√ß√£o foi comprada ou vendida e inclua o s√≠mbolo da a√ß√£o, o pre√ßo (de compra ou venda), o n√∫mero de a√ß√µes compradas ou vendidas e a data e hora em que a transa√ß√£o ocorreu.</li>
<li>Talvez seja necess√°rio alterar a tabela criada para <code>buy</code> ou complement√°-la com uma tabela adicional. Tente minimizar redund√¢ncias.</li>
</ul>
<h3>Toque pessoal</h3>
<p>Implemente pelo menos um toque pessoal de sua escolha:</p>
<ul>
<li>Permita que os usu√°rios alterem suas senhas.</li>
<li>Permita que os usu√°rios adicionem dinheiro extra √† sua conta.</li>
<li>Permita que os usu√°rios comprem mais a√ß√µes ou vendam a√ß√µes que j√° possuem no pr√≥prio <code>index</code>, sem precisar digitar os s√≠mbolos das a√ß√µes manualmente.</li>
<li>Implemente algum outro recurso de escopo compar√°vel.</li>
</ul>
<h2>Passo a passo</h2>
<div class="alert alert-info" data-alert="info" role="alert"><p>Observe que Brian menciona que <code class="language-plaintext highlighter-rouge">lookup</code> retornar√° o nome da a√ß√£o. Conforme acima, agora ele retorna apenas o pre√ßo e o s√≠mbolo.</p></div>

<div class="ratio ratio-16x9" data-video=""><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="border" data-video="" src="https://www.youtube.com/embed/7wPTAwT-6bA?modestbranding=0&amp;rel=0&amp;showinfo=0"></iframe></div>

<h2>Testes</h2>
<p>Certifique-se de testar seu aplicativo da web manualmente, como</p>
<ul>
<li>registrando um novo usu√°rio e verificando se a p√°gina do portf√≥lio √© carregada com as informa√ß√µes corretas,</li>
<li>solicitando uma cota√ß√£o usando um s√≠mbolo de a√ß√£o v√°lido,</li>
<li>comprando uma a√ß√£o v√°rias vezes, verificando se o portf√≥lio exibe totais corretos,</li>
<li>vendendo todas ou algumas a√ß√µes, verificando o portf√≥lio novamente e</li>
<li>verificando se a p√°gina do hist√≥rico mostra todas as transa√ß√µes do usu√°rio conectado.</li>
</ul>
<p>Tamb√©m teste alguns usos inesperados, como</p>
<ul>
<li>inserindo strings alfab√©ticas em formul√°rios quando apenas n√∫meros s√£o esperados,</li>
<li>inserindo zero ou n√∫meros negativos em formul√°rios quando apenas n√∫meros positivos s√£o esperados,</li>
<li>inserindo valores de pontos flutuantes em formul√°rios quando apenas inteiros s√£o esperados,</li>
<li>tentando gastar mais dinheiro do que o usu√°rio tem,</li>
<li>tentando vender mais a√ß√µes do que o usu√°rio tem,</li>
<li>inserindo um s√≠mbolo de a√ß√£o inv√°lido e</li>
<li>incluindo caracteres potencialmente perigosos, como <code>'</code> e <code>;</code> em consultas SQL.</li>
</ul>
<p>Voc√™ tamb√©m pode verificar a validade do HTML clicando no bot√£o <strong>I ‚ô• VALIDATOR</strong> no rodap√© de cada uma das suas p√°ginas, que enviar√° seu HTML para <a href="https://validator.w3.org/">validator.w3.org</a>.</p>
<p>Ap√≥s a satisfa√ß√£o, para testar seu c√≥digo com <code>check50</code>, execute o abaixo.</p>
<pre><code>  check50 cs50/problems/2024/x/finance
</code></pre>
<div class="alert alert-warning" data-alert="warning" role="alert"><p>Esteja ciente de que <code class="language-plaintext highlighter-rouge">check50</code> testar√° todo o seu programa como um todo. Se voc√™ o executar <strong>antes</strong> de concluir todas as fun√ß√µes necess√°rias, ele poder√° relatar erros em fun√ß√µes que s√£o realmente corretas, mas dependem de outras fun√ß√µes.</p></div>

<h2>Estilo</h2>
<pre><code>  style50 app.py
</code></pre>
<h2>Solu√ß√£o do corpo docente</h2>
<p>Voc√™ √© bem-vindo para estilizar seu pr√≥prio aplicativo de forma diferente, mas √© assim que a solu√ß√£o do corpo docente se parece!</p>
<p><a href="https://finance.cs50.net/">https://finance.cs50.net/</a></p>
<p>Sinta-se √† vontade para se registrar para obter uma conta e brincar com o app. <strong>N√£o</strong> use uma senha que voc√™ usa em outros sites.</p>
<p>√â <strong>razo√°vel</strong> olhar para o HTML e CSS do corpo docente.</p>
<h2>Dicas</h2>
<ul>
<li>Para formatar um valor como um valor em d√≥lar dos EUA (com centavos listados em duas casas decimais), voc√™ pode usar o filtro <code>usd</code> em seus modelos Jinja (imprimindo valores como <code>{{ value | usd }}</code> em vez de <code>{{ value }}</code>.</li>
<li>Dentro de <code>cs50.SQL</code> h√° um m√©todo <code>execute</code> cujo primeiro argumento deve ser uma <code>str</code> de SQL. Se essa <code>str</code> contiver par√¢metros de ponto de interroga√ß√£o aos quais valores devem ser vinculados, esses valores podem ser fornecidos como par√¢metros nomeados adicionais para <code>execute</code>. Veja a implementa√ß√£o de <code>login</code> para um exemplo. O valor de retorno de <code>execute</code> √© o seguinte:<ul>
<li>Se <code>str</code> for um <code>SELECT</code>, ent√£o <code>execute</code> retornar√° uma <code>list</code> de zero ou mais objetos <code>dict</code>, dentro dos quais est√£o chaves e valores representando campos de uma tabela e c√©lulas, respectivamente.</li>
<li>Se <code>str</code> for um <code>INSERT</code>, e a tabela na qual os dados foram inseridos contiver uma <code>PRIMARY KEY</code> de autoincremento, ent√£o <code>execute</code> retornar√° o valor da chave prim√°ria da linha rec√©m-inserida.</li>
<li>Se <code>str</code> for um <code>DELETE</code> ou um <code>UPDATE</code>, ent√£o <code>execute</code> retornar√° o n√∫mero de linhas exclu√≠das ou atualizadas por <code>str</code>.</li>
</ul>
</li>
<li>Lembre-se que <code>cs50.SQL</code> registrar√° em sua janela de terminal todas as consultas que voc√™ executar via <code>execute</code> (para que voc√™ possa confirmar se elas est√£o conforme o esperado).</li>
<li>Certifique-se de usar par√¢metros vinculados a ponto de interroga√ß√£o (ou seja, um <a href="https://www.python.org/dev/peps/pep-0249/#paramstyle">paramstyle</a> de <code>named</code>) ao chamar o m√©todo <code>execute</code> do CS50, √† la <code>WHERE ?</code>. <strong>N√£o</strong> use f-strings, <a href="https://docs.python.org/3.6/library/functions.html#format,"><code>format</code></a> ou <code>+</code> (ou seja, concatena√ß√£o), para que voc√™ n√£o corra o risco de um ataque de inje√ß√£o de SQL.</li>
<li>Se (e somente se) j√° estiver confort√°vel com SQL, voc√™ pode usar <a href="https://docs.sqlalchemy.org/en/latest/index.html">SQLAlchemy Core</a> ou <a href="https://flask-sqlalchemy.pocoo.org/">Flask-SQLAlchemy</a> (ou seja, <a href="https://docs.sqlalchemy.org/en/latest/index.html">SQLAlchemy ORM</a>) em vez de <code>cs50.SQL</code>.</li>
<li>Voc√™ pode adicionar arquivos est√°ticos adicionais em <code>static/</code>.</li>
<li>Provavelmente voc√™ desejar√° consultar a <a href="https://jinja.palletsprojects.com/en/3.1.x/">documenta√ß√£o do Jinja</a> ao implementar seus modelos.</li>
<li>√â <strong>razo√°vel</strong> pedir a outras pessoas para testar (e tentar acionar erros em) seu site.</li>
<li>Voc√™ pode alterar a est√©tica dos sites, como via<ul>
<li><a href="https://bootswatch.com/">bootswatch.com</a>,</li>
<li><a href="https://getbootstrap.com/docs/5.1/content/">getbootstrap.com/docs/5.1/content</a>,</li>
<li><a href="https://getbootstrap.com/docs/5.1/components/">getbootstrap.com/docs/5.1/components</a>, e/ou</li>
<li><a href="https://memegen.link/">memegen.link</a>.</li>
</ul>
</li>
<li>Voc√™ pode achar a <a href="https://flask.palletsprojects.com/en/1.1.x/quickstart/">documenta√ß√£o do Flask</a> e a <a href="https://jinja.palletsprojects.com/en/2.11.x/templates/">documenta√ß√£o do Jinja</a> √∫teis!</li>
</ul>
<h2>FAQs</h2>
<h3>ImportError: No module named ‚Äòapplication‚Äô</h3>
<p>Por padr√£o, <code>flask</code> procura um arquivo chamado <code>app.py</code> em seu diret√≥rio de trabalho atual (porque configuramos o valor de <code>FLASK_APP</code>, uma vari√°vel de ambiente, para ser <code>app.py</code>). Se ver este erro, provavelmente voc√™ executou <code>flask</code> no diret√≥rio errado!</p>
<h3>OSError: [Errno 98] Address already in use</h3>
<p>Se, ao executar <code>flask</code>, voc√™ vir este erro, provavelmente (ainda) tem <code>flask</code> sendo executado em outra aba. Certifique-se de encerrar aquele outro processo, como com ctrl-c, antes de iniciar <code>flask</code> novamente. Se voc√™ n√£o tiver nenhuma outra aba, execute <code>fuser -k 8080/tcp</code> para encerrar quaisquer processos que (ainda) estejam escutando na porta TCP 8080.</p>
<h2>Como enviar</h2>
<p>Em seu terminal, execute o abaixo para enviar seu trabalho.</p>
<pre><code>  submit50 cs50/problems/2024/x/finance
</code></pre>
<div class="alert alert-danger" data-alert="danger" role="alert"><h3 id="why-does-my-submission-pass-check50-but-shows-no-results-in-my-gradebook-after-running-submit50">Por que minha submiss√£o passa pelo check50, mas mostra "Sem resultados" em meu Gradebook ap√≥s executar submit50?</h3>

<p>Em alguns casos, <code class="language-plaintext highlighter-rouge">submit50</code> pode n√£o avaliar a atribui√ß√£o devido a (1) formata√ß√£o inconsistente em seu arquivo <code class="language-plaintext highlighter-rouge">app.py</code> e/ou (2) arquivos adicionais desnecess√°rios sendo enviados com o conjunto de problemas. Para corrigir esses problemas, execute <code class="language-plaintext highlighter-rouge">black app.py</code> na pasta <code class="language-plaintext highlighter-rouge">finance</code>. Resolva quaisquer problemas que sejam revelados. Em seguida, examine o conte√∫do de sua pasta <code class="language-plaintext highlighter-rouge">finance</code>. Exclua arquivos estranhos, como sess√µes do flask ou outros arquivos que n√£o fazem parte de sua implementa√ß√£o do conjunto de problemas. Al√©m disso, execute <code class="language-plaintext highlighter-rouge">check50</code> novamente para garantir que sua submiss√£o ainda funcione. Por fim, execute o comando <code class="language-plaintext highlighter-rouge">submit50</code> acima novamente. Seu resultado aparecer√° em seu <a href="https://cs50.me/cs50x">Gradebook</a> em alguns minutos.</p>

<p>Observe que se houver uma pontua√ß√£o num√©rica ao lado de sua submiss√£o de finan√ßas na √°rea <code class="language-plaintext highlighter-rouge">submissions</code> do seu <a href="https://cs50.me/cs50x">Gradebook</a>, o procedimento discutido acima n√£o se aplica a voc√™. Provavelmente, voc√™ n√£o atendeu totalmente aos requisitos do conjunto de problemas e deve confiar no <code class="language-plaintext highlighter-rouge">check50</code> para obter pistas sobre que trabalho resta.</p></div>


        </main>
      </div>
    </div>
  </body>

</html>