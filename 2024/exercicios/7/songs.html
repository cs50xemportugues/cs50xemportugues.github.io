<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>CS50x em Portugu√™s</title>

    <!-- http://getbootstrap.com/docs/4.5/getting-started/introduction/ -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/popper.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>

    <!-- https://momentjs.com/, https://momentjs.com/timezone/ -->
    <script src="/static/js/moment.min.js"></script>
    <script src="/static/js/moment-timezone-with-data.min.js"></script>
    <script src="/static/js/luxon.min.js"></script>

    <!-- https://www.algolia.com/doc/guides/building-search-ui/installation/js/ -->
    <script src="/static/js/algoliasearchLite.min.js"></script>
    <script src="/static/js/instantsearch.production.min.js"></script>
    <script src="/static/js/jekyll-theme-cs50.js"></script>

    <script id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/static/highlight/highlight.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.8.0/dist/mermaid.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/highlight/styles/vs.min.css"/>
    <link rel="stylesheet" href="/static/css/page.css">

    <style>
      code {
        color: black;
        border: 1px solid #dee2e6;
      }

      pre > code {
        padding: 0 !important;
      }

      pre {
        border: 1px solid #dee2e6;
      }

      .mermaid {
        background-color: white !important;
        border: none !important;
      }
    </style>
  </head>

  <body>
    <!-- Markdown Flux Diagrams -->
    <script type="module">
      mermaid.initialize({startOnLoad: true});
    </script>
    <div class="container-fluid">
      <div class="row">
        <aside class="col-md" style="background-color: darkgreen">
  <header>
    <h1>
      <a href="">CS50x em Portugu√™s</a>
    </h1>

    <p>
      <a target="_blank" href=""></a>
      <br/>
      2024
    </p>
  </header>

  <button class="btn btn-sm collapsed d-md-none" aria-controls="nav" aria-expanded="false" data-target="aside &gt; nav" data-toggle="collapse">
    Menu
  </button>

  <nav class="collapse d-md-block" id="nav">
    <hr/>

    <ul>
      <li>
        <a href="/2024/semanas/0.html">Semana
          0</a>
        Scratch üò∫
      </li>
      <li>
        <a href="/2024/semanas/1.html">Semana
          1</a>
        C
      </li>
      <li>
        <a href="/2024/semanas/2.html">Semana
          2</a>
        Arrays
      </li>
      <li>
        <a href="/2024/semanas/3.html">Semana
          3</a>
        Algoritmos
      </li>
      <li>
        <a href="/2024/semanas/4.html">Semana
          4</a>
        Mem√≥ria
      </li>
      <li>
        <a href="/2024/semanas/5.html">Semana
          5</a>
        Estruturas de Dados
      </li>
      <li>
        <a href="/2024/semanas/6.html">Semana
          6</a>
        Python
      </li>
      <li>
        <a href="/2024/semanas/7.html">Semana
          7</a>
        SQL
      </li>
      <li>
        <a href="/2024/semanas/8.html">Semana
          8</a>
        HTML, CSS, JavaScript
      </li>
      <li>
        <a href="/2024/semanas/9.html">Semana
          9</a>
        Flask
      </li>
      <li>
        <a href="/2024/semanas/10.html">Semana
          10</a>
        Seguran√ßa Cibern√©tica
      </li>
    </ul>

    <hr/>

    <ul>
      <li>
        <a href="/2024/projeto.html">Projeto Final</a>
      </li>
    </ul>

    <hr/>

    <ul>
      <li>
        <a href="/2024/honestidade.html">Honestidade Acad√™mica</a>
      </li>
      <li>
        <a href="/2024/certificado.html">Certificado CS50</a>
      </li>
      <li>
        <a href="/2024/perguntas-frequentes.html">Perguntas Frequentes</a>
      </li>
      <li>
        <a href="https://cs50.me/cs50x">Livro de Notas</a>
      </li>
      <li>
        <a href="/2024/equipe.html">Equipe</a>
      </li>
      <li>
        <a href="/2024/plano-de-curso.html">Plano de Curso</a>
      </li>
    </ul>
    <hr/>

    <ul>
      <li>
        <a href="/manual/index.html">P√°ginas do Manual</a>
      </li>
      <li>
        <a href="/2024/estilo.html">Guia de Estilo</a>
      </li>
    </ul>
  </nav>
</aside>
        <main class="col-md markdown-body">
          

  <h2>Can√ß√µes</h2>
<p><img alt="Logotipo do Spotify Wrapped '22" src="https://cs50.harvard.edu/x/2024/psets/7/songs/wrapped.png" /></p>
<h2>Problema a resolver</h2>
<p>Escreva consultas SQL para responder a perguntas sobre um banco de dados das 100 m√∫sicas mais transmitidas no <a href="https://en.wikipedia.org/wiki/Spotify">Spotify</a> em 2018.</p>
<h2>Demonstra√ß√£o</h2>
<script async="" data-autoplay="1" data-cols="100" data-loop="1" data-rows="12" id="asciicast-DsiNSGFrMq2J6t9aDYhIQUQHy" src="https://asciinema.org/a/DsiNSGFrMq2J6t9aDYhIQUQHy.js"></script>

<h2>Introdu√ß√£o</h2>
<p>Para este problema, voc√™ usar√° um banco de dados fornecido pela equipe do CS50.</p>
<p>Abra o <a href="https://cs50.dev/">VS Code</a>.</p>
<p>Comece clicando dentro da janela do terminal e execute <code>cd</code> sozinho. Voc√™ ver√° que o "prompt" √© semelhante ao abaixo.</p>
<pre><code>  $
</code></pre>
<p>Clique dentro da janela do terminal e execute</p>
<pre><code>  wget https://cdn.cs50.net/2023/fall/psets/7/songs.zip
</code></pre>
<p>seguido por Enter para baixar um ZIP chamado <code>songs.zip</code> no seu codespace. Tome cuidado para n√£o ignorar o espa√ßo entre <code>wget</code> e a URL a seguir, ou qualquer outro caractere!</p>
<p>Agora execute</p>
<pre><code>  unzip songs.zip
</code></pre>
<p>para criar uma pasta chamada <code>songs</code>. Voc√™ n√£o precisa mais do arquivo ZIP, ent√£o pode executar</p>
<pre><code>  rm songs.zip
</code></pre>
<p>e responder com "y" seguido por Enter no prompt para remover o arquivo ZIP baixado.</p>
<p>Agora digite</p>
<pre><code>  cd songs
</code></pre>
<p>seguido por Enter para se mover (ou seja, abrir) para esse diret√≥rio. Seu prompt agora deve ser semelhante ao abaixo.</p>
<pre><code>  songs/ $
</code></pre>
<p>Se tudo foi bem-sucedido, voc√™ deve executar</p>
<pre><code>  ls
</code></pre>
<p>e ver√° 8 arquivos .sql, <code>songs.db</code> e <code>answers.txt</code>.</p>
<p>Se voc√™ tiver algum problema, siga os mesmos passos novamente e veja se consegue determinar onde errou!</p>
<h2>Compreens√£o</h2>
<p>H√° um arquivo chamado <code>songs.db</code>, um banco de dados SQLite que armazena dados do <a href="https://developer.spotify.com/documentation/web-api/">Spotify</a> sobre m√∫sicas e seus artistas. Este conjunto de dados cont√©m as 100 m√∫sicas mais transmitidas no Spotify em 2018. Em uma janela de terminal, execute <code>sqlite3 songs.db</code> para come√ßar a executar consultas no banco de dados.</p>
<p>Primeiro, quando o <code>sqlite3</code> solicitar que voc√™ forne√ßa uma consulta, digite <code>.schema</code> e pressione Enter. Isso exibir√° as instru√ß√µes <code>CREATE TABLE</code> usadas para gerar cada uma das tabelas no banco de dados. Ao examinar essas instru√ß√µes, voc√™ pode identificar as colunas presentes em cada tabela.</p>
<p>Observe que cada <code>artist</code> tem um <code>id</code> e um <code>name</code>. Observe tamb√©m que cada m√∫sica tem um <code>name</code>, um <code>artist_id</code> (correspondente ao <code>id</code> do artista da m√∫sica), bem como valores para a capacidade de dan√ßa, energia, tecla, volume, fala (presen√ßa de palavras faladas em uma faixa), val√™ncia, andamento e dura√ß√£o da m√∫sica (medida em milissegundos).</p>
<p>O desafio √† sua frente √© escrever consultas SQL para responder a uma variedade de perguntas diferentes selecionando dados de uma ou mais dessas tabelas. Depois de fazer isso, voc√™ refletir√° sobre as maneiras pelas quais o Spotify pode usar esses mesmos dados em sua campanha anual <a href="https://en.wikipedia.org/wiki/Spotify_Wrapped">Spotify Wrapped</a> para caracterizar os h√°bitos dos ouvintes.</p>
<h2>Detalhes de implementa√ß√£o</h2>
<p>Para cada um dos problemas a seguir, voc√™ deve escrever uma √∫nica consulta SQL que gere os resultados especificados por cada problema. Sua resposta deve assumir a forma de uma √∫nica consulta SQL, embora voc√™ possa aninhar outras consultas dentro dela. Voc√™ <strong>n√£o deve</strong> presumir nada sobre os <code>id</code>s de nenhuma m√∫sica ou artista em particular: suas consultas devem ser precisas, mesmo que o <code>id</code> de alguma m√∫sica ou pessoa em particular seja diferente. Finalmente, cada consulta deve retornar apenas os dados necess√°rios para responder √† pergunta: se o problema apenas solicitar que voc√™ exiba os nomes das m√∫sicas, por exemplo, sua consulta n√£o deve exibir tamb√©m o andamento de cada m√∫sica.</p>
<ol>
<li>No <code>1.sql</code>, escreva uma consulta SQL para listar os nomes de todas as m√∫sicas no banco de dados.
    - Sua consulta deve gerar uma tabela com uma √∫nica coluna para o nome de cada m√∫sica.</li>
<li>No <code>2.sql</code>, escreva uma consulta SQL para listar os nomes de todas as m√∫sicas em ordem crescente de andamento.
    - Sua consulta deve gerar uma tabela com uma √∫nica coluna para o nome de cada m√∫sica.</li>
<li>No <code>3.sql</code>, escreva uma consulta SQL para listar os nomes das 5 m√∫sicas mais longas, em ordem decrescente de dura√ß√£o.
    - Sua consulta deve gerar uma tabela com uma √∫nica coluna para o nome de cada m√∫sica.</li>
<li>No <code>4.sql</code>, escreva uma consulta SQL que liste os nomes de todas as m√∫sicas com capacidade de dan√ßa, energia e val√™ncia superiores a 0,75.
    - Sua consulta deve gerar uma tabela com uma √∫nica coluna para o nome de cada m√∫sica.</li>
<li>No <code>5.sql</code>, escreva uma consulta SQL que retorne a energia m√©dia de todas as m√∫sicas.
    - Sua consulta deve gerar uma tabela com uma √∫nica coluna e uma √∫nica linha contendo a energia m√©dia.</li>
<li>No <code>6.sql</code>, escreva uma consulta SQL que liste os nomes das m√∫sicas que s√£o de Post Malone.
    - Sua consulta deve gerar uma tabela com uma √∫nica coluna para o nome de cada m√∫sica.
    - Voc√™ n√£o deve fazer suposi√ß√µes sobre o <code>artist_id</code> de Post Malone.</li>
<li>No <code>7.sql</code>, escreva uma consulta SQL que retorne a energia m√©dia das m√∫sicas de Drake.
    - Sua consulta deve gerar uma tabela com uma √∫nica coluna e uma √∫nica linha contendo a energia m√©dia.
    - Voc√™ n√£o deve fazer suposi√ß√µes sobre o <code>artist_id</code> de Drake.</li>
<li>No <code>8.sql</code>, escreva uma consulta SQL que liste os nomes das m√∫sicas que apresentam outros artistas.
    - M√∫sicas que apresentam outros artistas incluir√£o "feat." no nome da m√∫sica.
    - Sua consulta deve gerar uma tabela com uma √∫nica coluna para o nome de cada m√∫sica.</li>
</ol>
<h2>Dicas</h2>
<p>Veja <a href="https://www.w3schools.com/sql/sql_ref_keywords.asp">esta refer√™ncia de palavras-chave SQL</a> para algumas sintaxes SQL que podem ser √∫teis!</p>
<p>Clique nos bot√µes abaixo para ler alguns conselhos!</p>
<h3>Liste os nomes de todas as m√∫sicas no banco de dados</h3>
<p>Lembre-se de que, para selecionar todos os valores na coluna de uma tabela, voc√™ pode usar a palavra-chave <code>SELECT</code> do SQL. <code>SELECT</code> √© seguido pela coluna (ou colunas) que voc√™ deseja selecionar, que por sua vez √© seguida por <code>FROM table</code> onde <code>table</code> √© o nome da tabela da qual voc√™ deseja selecionar.</p>
<p>No <code>1.sql</code>, ent√£o, tente escrever o seguinte:</p>
<pre><code>  -- Todas as m√∫sicas no banco de dados.
  SELECT name
  FROM songs;
</code></pre>
<h3>Liste os nomes de todas as m√∫sicas em ordem crescente de andamento</h3>
<p>Lembre-se de que o SQL tem uma palavra-chave <code>ORDER BY</code>, pela qual voc√™ pode ordenar os resultados de sua consulta pelo valor em uma determinada coluna. Por exemplo, <code>ORDER BY tempo</code> ordenar√° os resultados pela coluna <code>tempo</code>.</p>
<p>No <code>2.sql</code>, ent√£o, tente escrever o seguinte:</p>
<pre><code>  -- Todas as m√∫sicas em ordem crescente de andamento.
  SELECT name
  FROM songs
  ORDER BY tempo;
</code></pre>
<h3>Liste os nomes das 5 m√∫sicas mais longas, em ordem decrescente de dura√ß√£o</h3>
<p>Lembre-se de que <code>ORDER BY</code> nem sempre precisa classificar em ordem crescente. Voc√™ pode especificar que seus resultados sejam classificados em ordem <em>decrescente</em> anexando <code>DESC</code>. Por exemplo, <code>ORDER BY duration_ms DESC</code> listar√° os resultados em ordem decrescente, por dura√ß√£o.</p>
<p>E lembre-se tamb√©m que <code>LIMIT n</code> pode especificar que voc√™ deseja apenas as primeiras \(n\) linhas que correspondem a uma consulta espec√≠fica. Por exemplo, <code>LIMIT 5</code> retornar√° apenas os cinco primeiros resultados da consulta.</p>
<p>No <code>3.sql</code>, ent√£o, tente escrever o seguinte:</p>
<pre><code>  -- Os nomes das 5 m√∫sicas mais longas, em ordem decrescente de dura√ß√£o.
  SELECT name
  FROM songs
  ORDER BY duration_ms DESC
  LIMIT 5;
</code></pre>
<h3>Liste os nomes de todas as m√∫sicas que t√™m uma capacidade de dan√ßa, energia e val√™ncia maiores que 0,75</h3>
<p>Lembre-se de que voc√™ pode filtrar resultados em SQL com cl√°usulas <code>WHERE</code>, que s√£o seguidas por alguma condi√ß√£o que normalmente testa os valores nas colunas de uma linha.</p>
<p>Lembre-se tamb√©m de que os operadores da SQL funcionam da mesma forma que os da C. Por exemplo, <code>&gt;</code> avalia como "verdadeiro" quando o valor √† esquerda √© maior que o valor √† direita. Voc√™ pode encadear essas express√µes junto, usando <code>AND</code> ou <code>OR</code>, para formar uma condi√ß√£o maior.</p>
<p>No <code>4.sql</code>, ent√£o, tente escrever o seguinte:</p>
<pre><code>  -- Os nomes de todas as m√∫sicas que t√™m capacidade de dan√ßa, energia e val√™ncia maiores que 0,75.
  SELECT nome
  FROM musicas
  WHERE capacidade_danca &gt; 0,75 AND energia &gt; 0,75 AND val√™ncia &gt; 0,75;
</code></pre>
<h3>Encontre a energia m√©dia de todas as m√∫sicas</h3>
<p>Lembre-se de que o SQL suporta palavras-chaves n√£o apenas para selecionar linhas espec√≠ficas, mas tamb√©m para <em>agregar</em> os dados nessas linhas. Em particular, voc√™ pode achar a palavra-chave <code>AVG</code> (para calcular m√©dias) √∫til. Para agregar os resultados de uma coluna, basta aplicar a fun√ß√£o de agrega√ß√£o a essa coluna. Por exemplo, <code>SELECT AVG(energia)</code> encontrar√° a m√©dia dos valores na coluna de energia para a consulta fornecida.</p>
<p>No <code>5.sql</code>, ent√£o, tente escrever o seguinte:</p>
<pre><code>  -- A energia m√©dia de todas as m√∫sicas.
  SELECT AVG(energia)
  FROM musicas;
</code></pre>
<h3>Liste os nomes das m√∫sicas que s√£o do Post Malone</h3>
<p>Observe que, se voc√™ executar <code>.schema musicas</code> no seu prompt do sqlite, a tabela <code>musicas</code> tem nomes de m√∫sicas, mas n√£o o nome do artista! Em vez disso, <code>musicas</code> tem uma coluna <code>id_artista</code>. Para listar os nomes de m√∫sicas do Post Malone, voc√™ primeiro precisa identificar o id do artista do Post Malone.</p>
<pre><code>  -- Identifique o id do artista do Post Malone
  SELECT id
  FROM artistas
  WHERE nome = 'Post Malone';
</code></pre>
<p>Esta consulta retorna 54. Agora, voc√™ pode consultar a tabela <code>musicas</code> para qualquer m√∫sica com o id do Post Malone.</p>
<pre><code>  SELECT nome
  FROM musicas
  WHERE id_artista = 54;
</code></pre>
<p>Mas, de acordo com a especifica√ß√£o, voc√™ deve estar atento para n√£o assumir conhecimento de nenhum id. Voc√™ pode melhorar o design desta consulta <em>aninhado</em> duas consultas.</p>
<p>No <code>6.sql</code>, ent√£o, tente escrever o seguinte:</p>
<pre><code>  -- Os nomes das m√∫sicas que s√£o do Post Malone.
  SELECT nome
  FROM musicas
  WHERE id_artista =
  (
      SELECT id
      FROM artistas
      WHERE nome = 'Post Malone'
  );
</code></pre>
<h3>Encontre a energia m√©dia das m√∫sicas que s√£o do Drake</h3>
<p>Observe que, semelhante √† consulta anterior, voc√™ precisar√° combinar v√°rias tabelas para executar esta consulta com √™xito. Voc√™ pode usar novamente subconsultas aninhadas, mas considere tamb√©m outra abordagem!</p>
<p>Lembre-se de que voc√™ pode usar a palavra-chave <code>JOIN</code> da SQL para combinar v√°rias tabelas em uma, desde que voc√™ especifique quais colunas entre essas tabelas devem corresponder em √∫ltima an√°lise. Por exemplo, a consulta a seguir une as tabelas <code>musicas</code> e <code>artistas</code>, indicando que a coluna <code>id_artista</code> na tabela <code>musicas</code> e a coluna <code>id</code> na tabela <code>artistas</code> devem corresponder:</p>
<pre><code>  SELECT *
  FROM musicas
  JOIN artistas ON musicas.id_artista = artistas.id
</code></pre>
<p>Com essas duas tabelas combinadas, √© apenas uma quest√£o de filtrar sua sele√ß√£o para encontrar a energia m√©dia das m√∫sicas do Drake.</p>
<p>No <code>7.sql</code>, ent√£o, tente escrever o seguinte:</p>
<pre><code>  -- A energia m√©dia das m√∫sicas que s√£o do Drake
  SELECT AVG(energia)
  FROM musicas
  JOIN artistas ON musicas.id_artista = artistas.id
  WHERE artistas.nome = 'Drake';
</code></pre>
<h3>Liste os nomes das m√∫sicas que apresentam outros artistas</h3>
<p>Para esta consulta, observe que m√∫sicas que apresentam outros artistas normalmente t√™m alguma men√ß√£o de ‚Äúfeat.‚Äù no t√≠tulo. Lembre-se de que a palavra-chave <code>LIKE</code> da SQL pode ser usada para corresponder strings com certas frases (como ‚Äúfeat.‚Äù!). Para fazer isso, voc√™ pode usar <code>%</code>: um caractere curinga que corresponde a qualquer sequ√™ncia de caracteres.</p>
<p>No <code>8.sql</code>, ent√£o, tente escrever o seguinte:</p>
<pre><code>  -- Os nomes das m√∫sicas que apresentam outros artistas.
  SELECT nome
  FROM musicas
  WHERE nome LIKE '%feat.%';
</code></pre>
<h2>Passo a passo</h2>
<iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="border" data-video="" src="https://video.cs50.io/wgKPUd_95AA"></iframe>

<details><summary>N√£o sabe como resolver?</summary><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="border" data-video="" src="https://video.cs50.io/7hydPL9ZswE"></iframe></details>

<h2>Spotify Wrapped</h2>
<p><a href="https://en.wikipedia.org/wiki/Spotify_Wrapped">Spotify Wrapped</a> √© um recurso que apresenta aos usu√°rios do Spotify suas 100 m√∫sicas mais tocadas no ano passado. Em 2021, o Spotify Wrapped calculou uma <a href="https://newsroom.spotify.com/2021-12-01/learn-more-about-the-audio-aura-in-your-spotify-2021-wrapped-with-aura-reader-mystic-michaela/">‚ÄúAura √Åudio‚Äù</a> para cada usu√°rio, uma ‚Äúleitura de [seus] dois humores mais proeminentes ditados por [suas] principais m√∫sicas e artistas do ano.‚Äù Suponha que o Spotify determine uma aura de √°udio observando a energia m√©dia, a val√™ncia e a capacidade de dan√ßa das 100 melhores m√∫sicas de uma pessoa no ano passado. No <code>answers.txt</code>, reflita sobre as seguintes quest√µes:</p>
<ul>
<li>Se <code>musicas.db</code> cont√©m as 100 melhores m√∫sicas de um ouvinte de 2018, como voc√™ caracterizaria sua aura de √°udio?</li>
<li>Suponha sobre por que o jeito que voc√™ calculou essa aura pode <em>n√£o</em> ser muito representativo do ouvinte. Que outras formas de calcular essa aura voc√™ prop√µe?</li>
</ul>
<p>Certifique-se de enviar <code>answers.txt</code> junto com cada um dos seus arquivos <code>.sql</code>!</p>
<h2>Como testar</h2>
<h3>Corre√ß√£o</h3>
<pre><code>  check50 cs50/problems/2024/x/musicas
</code></pre>
<h2>Como enviar</h2>
<pre><code>  submit50 cs50/problems/2024/x/musicas
</code></pre>
<h2>Reconhecimentos</h2>
<p>Conjunto de dados do <a href="https://www.kaggle.com/nadintamer/top-spotify-tracks-of-2018">Kaggle</a>.</p>


        </main>
      </div>
    </div>
  </body>

</html>